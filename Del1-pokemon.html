<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokedex</title>
  </head>
  <body>
    <h1>The Pokedex</h1>

    <!-- knapp for å lage ny pokemon -->
    <button onclick="developNewPokemon()">Develop new Pokémon</button>

    <!-- container for pokemonkort-->

    <div id="selectedPokemon" class="pokemon-container"></div>

    <!--Rullgarding liste her for filtrering-->
    <select id="typeDropdown" class="type-dropdown" onchange="filterPokemon()">
      <option value="Normal">Normal</option>
      <option value="Fire">Fire</option>
      <option value="Water">Water</option>
      <option value="Electric">Electric</option>
      <option value="Grass">Grass</option>
      <option value="Ice">Ice</option>
      <option value="Fighting">Fighting</option>
      <option value="Poison">Poison</option>
      <option value="Ground">Ground</option>
      <option value="Flying">Flying</option>
      <option value="Psychic">Psychic</option>
      <option value="Bug">Bug</option>
      <option value="Rock">Rock</option>
      <option value="Ghost">Ghost</option>
      <option value="Dragon">Dragon</option>
      <option value="Dark">Dark</option>
      <option value="Steel">Steel</option>
      <option value="Fairy">Fairy</option>
      <option value="Stellar">Stellar</option></select
    ><br />

    <button onclick="developNewPokemon()">Develop new Pokémon</button
    ><br /><br />

    <div id="pokemonDisplay" class="pokemon-container"></div>

    <div id="selectedPokemon" class="pokemon-container"></div>

    <script>
      window.onload = () => {
        fetchAndDisplayRandomPokemon("pokemonDisplay");
      };
      async function fetchRandomPokemon() {
        try {
          const response = await fetch(
            `https://pokeapi.co/api/v2/pokemon?limit=50`
          );
          if (!response.ok) {
            throw new Error("Failed to fetch random Pokemon");
          }
          const data = await response.json();
          return data.results;
        } catch (error) {
          console.error(error);
        }
      }

      async function fetchAndDisplayRandomPokemon(containerId) {
        const pokemons = await fetchRandomPokemon();
        const pokemonDisplay = document.getElementById(containerId);
        pokemonDisplay.innerHTML = "";

        pokemons.forEach(async (pokemon, index) => {
          const response = await fetch(pokemon.url);
          const data = await response.json();
          const primaryType = data.types[0].type.name;
          const card = createPokemonCard(
            data.name,
            //her brukte jeg front_default men fristet veldig med shiny versjoner også//
            data.sprites.front_default,
            primaryType,
            containerId
          );

          pokemonDisplay.appendChild(card);
        });
      }


      
    </script>
  </body>
</html>
